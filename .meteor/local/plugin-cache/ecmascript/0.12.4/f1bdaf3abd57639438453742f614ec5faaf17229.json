{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/server/publications.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"server/publications.js","filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/server/publications.js","passPerPreset":false,"envName":"development","cwd":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","root":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","plugins":[{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/server/publications.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/publications.js"}},"code":"/**\n* Flexruio Created by YN. Pamungkas Jayuda.\n*/\nMeteor.publish('member', function (iLimit, oFilter, oOptions) {\n  if (this.userId) {\n    var oOPTIONS = Object.assign({}, {\n      fields: {\n        profile: 1,\n        username: 1\n      }\n    }, oOptions);\n    oOPTIONS.limit = iLimit * 2;\n\n    if (iLimit == 0) {\n      delete oOPTIONS.limit;\n    }\n\n    if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n      return Meteor.users.find({\n        aktifYN: 1\n      });\n    } else {\n      return Meteor.users.find(oFilter, oOPTIONS);\n    }\n  } else {\n    this.ready();\n  }\n});\nMeteor.publish('menuGroup', function () {\n  if (this.userId) {\n    var menuAuth = MENUAUTH.find({\n      userId: this.userId\n    });\n    var groupMENU = menuAuth.map(function (p) {\n      return p.groupMENU;\n    });\n    var oFILTERS = {\n      aktifYN: 1,\n      namaMENUGROUP: {\n        $in: groupMENU\n      }\n    };\n\n    if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n      return MENUGROUP.find({\n        aktifYN: 1\n      });\n    } else {\n      return MENUGROUP.find(oFILTERS);\n    }\n  } else {\n    this.ready();\n  }\n});\nMeteor.publish('messageMember', function (iLimit) {\n  if (this.userId) {\n    var thisusername = MEMBER.findOne({\n      _id: this.userId\n    }).username;\n    var dataMESSAGE = MESSAGEMEMBER.find({\n      username: thisusername,\n      aktifYN: 1\n    });\n    var idMessage = dataMESSAGE.map(function (p) {\n      return p.idMessage;\n    });\n    var oOPTIONS = {\n      sort: {\n        createAt: -1\n      },\n      limit: iLimit\n    };\n\n    if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n      return MESSAGEMEMBER.find({\n        aktifYN: 1\n      }, oOPTIONS);\n    } else {\n      return MESSAGEMEMBER.find({\n        idMessage: {\n          $in: idMessage\n        },\n        aktifYN: 1\n      }, oOPTIONS);\n    }\n  } else {\n    this.ready();\n  }\n});\nMeteor.publish('message', function (iLimit) {\n  if (this.userId) {\n    var thisusername = MEMBER.findOne({\n      _id: this.userId\n    }).username;\n    var dataMESSAGE = MESSAGEMEMBER.find({\n      username: thisusername,\n      aktifYN: 1\n    });\n    var idMessage = dataMESSAGE.map(function (p) {\n      return p.idMessage;\n    });\n    var oOPTIONS = {\n      sort: {\n        createAt: -1\n      },\n      limit: iLimit\n    };\n\n    if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n      return MESSAGE.find({\n        aktifYN: 1\n      }, oOPTIONS);\n    } else {\n      return MESSAGE.find({\n        _id: {\n          $in: idMessage\n        },\n        aktifYN: 1\n      }, oOPTIONS);\n    }\n  } else {\n    this.ready();\n  }\n});\nMeteor.publish('menu', function () {\n  if (this.userId) {\n    var menuAuth = MENUAUTH.find({\n      userId: this.userId\n    });\n    var idMenu = menuAuth.map(function (p) {\n      return p.idMENU;\n    });\n\n    if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n      return MENU.find({\n        aktifYN: 1\n      });\n    } else {\n      return MENU.find({\n        _id: {\n          $in: idMenu\n        },\n        aktifYN: 1\n      });\n    }\n  } else {\n    this.ready();\n  }\n});\n\npublishData = function (sNama, sObject, oWhere, oConditions) {\n  Meteor.publish(sNama, function (iLimit, oFilter, oOptions) {\n    // gabungkan OR\n    var atauALL = [{\n      aktifYN: 1\n    }, {\n      aktifYN: \"1\"\n    }, {\n      aktifYN: 1\n    }];\n\n    if (adaDATA(oWhere[\"$or\"])) {\n      atauALL = atauALL.concat(oWhere[\"$or\"]);\n    }\n\n    var oFILTER_OR = oFilter[\"$or\"];\n\n    if (adaDATA(oFILTER_OR)) {\n      atauALL = atauALL.concat(oFilter[\"$or\"]);\n    } // gabungkan AND\n\n\n    var andALL = [];\n\n    if (adaDATA(oWhere[\"$and\"])) {\n      andALL = andALL.concat(oWhere[\"$and\"]);\n    }\n\n    if (adaDATA(oFilter[\"$and\"])) {\n      andALL = andALL.concat(oFilter[\"$and\"]);\n    } // gabungkan oWhere dan oFilter\n\n\n    oWhere = Object.assign({}, oWhere, oFilter);\n    oWhere[\"$or\"] = atauALL;\n    oWhere[\"$and\"] = andALL; // gabungkan oConditions\n\n    oConditions = Object.assign({}, oConditions, oOptions);\n\n    if (!adaDATA(oConditions)) {\n      oConditions = {\n        sort: {\n          createAt: -1\n        },\n        limit: iLimit\n      };\n    }\n\n    oConditions.limit = iLimit * 2;\n\n    if (iLimit == 0) {\n      delete oConditions.limit;\n    }\n\n    if (this.userId) {\n      var data = sObject.find(oFilter, oConditions);\n      return data;\n    } else {\n      this.ready();\n    }\n  });\n};\n/**    publishData(NAME_Publications, OBJECT_Collections, OBJECT_OFilter, OBJECT_oOPTIONS)      **/\n\n\npublishData(\"menuAuthku\", MENUAUTH, {}, {});\npublishData('menuAuth', MENUAUTH, {}, {});\npublishData('activitylogs', ACTIVITYLOGS, {}, {});\npublishData('profileData', PROFILEDATA, {}, {});\npublishData('woTipe', WOTIPE, {}, {});\npublishData('woSubTipe', WOSUBTIPE, {}, {});\npublishData('woSubTipeDetail', WOSUBTIPEDETAIL, {}, {});\npublishData('wo', WO, {}, {});\npublishData('apimanager', APIMANAGER, {}, {});","map":{"version":3,"sources":["server/publications.js"],"names":["Meteor","publish","iLimit","oFilter","oOptions","userId","oOPTIONS","Object","assign","fields","profile","username","limit","Roles","userIsInRole","users","find","aktifYN","ready","menuAuth","MENUAUTH","groupMENU","map","p","oFILTERS","namaMENUGROUP","$in","MENUGROUP","thisusername","MEMBER","findOne","_id","dataMESSAGE","MESSAGEMEMBER","idMessage","sort","createAt","MESSAGE","idMenu","idMENU","MENU","publishData","sNama","sObject","oWhere","oConditions","atauALL","adaDATA","concat","oFILTER_OR","andALL","data","ACTIVITYLOGS","PROFILEDATA","WOTIPE","WOSUBTIPE","WOSUBTIPEDETAIL","WO","APIMANAGER"],"mappings":"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","sourcesContent":["/**\n* Flexruio Created by YN. Pamungkas Jayuda.\n*/\n\nMeteor.publish('member', function (iLimit, oFilter, oOptions) {\n    if (this.userId) {\n        var oOPTIONS = Object.assign({}, {fields: {profile: 1, username:1}}, oOptions);\n        oOPTIONS.limit = iLimit * 2;\n        if (iLimit == 0) {\n            delete oOPTIONS.limit;\n        }\n        if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n            return Meteor.users.find({aktifYN: 1});\n        } else {\n            return Meteor.users.find(oFilter, oOPTIONS);\n        }\n    } else {\n        this.ready();\n    }\n});\n\n\nMeteor.publish('menuGroup', function () {\n    if (this.userId) {\n        var menuAuth = MENUAUTH.find({userId: this.userId});\n        var groupMENU = menuAuth.map(function (p) {\n            return p.groupMENU\n        });\n        var oFILTERS = {aktifYN: 1, namaMENUGROUP: {$in: groupMENU}};\n\n        if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n            return  MENUGROUP.find({aktifYN: 1});\n        } else {\n            return MENUGROUP.find(oFILTERS);\n        }\n    } else {\n        this.ready();\n    }\n});\n\n\n\nMeteor.publish('messageMember', function (iLimit) {\n    if (this.userId) {\n        var thisusername = MEMBER.findOne({_id:this.userId}).username;\n        var dataMESSAGE = MESSAGEMEMBER.find({username:thisusername, aktifYN:1});\n        var idMessage = dataMESSAGE.map(function (p) {\n            return p.idMessage\n        });\n        var oOPTIONS = {\n            sort: {createAt: -1},\n            limit: iLimit\n        };\n\n        if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n            return MESSAGEMEMBER.find({aktifYN: 1}, oOPTIONS);\n        } else {\n            return MESSAGEMEMBER.find({idMessage: {$in: idMessage}, aktifYN: 1}, oOPTIONS);\n        }\n\n    } else {\n        this.ready();\n    }\n});\n\n\nMeteor.publish('message', function (iLimit) {\n    if (this.userId) {\n        var thisusername = MEMBER.findOne({_id:this.userId}).username;\n\n        var dataMESSAGE = MESSAGEMEMBER.find({username:thisusername, aktifYN: 1});\n        var idMessage = dataMESSAGE.map(function (p) {\n            return p.idMessage\n        });\n        var oOPTIONS = {\n            sort: {createAt: -1},\n            limit: iLimit\n        };\n\n        if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n            return MESSAGE.find({aktifYN: 1}, oOPTIONS);\n        } else {\n            return MESSAGE.find({_id: {$in: idMessage}, aktifYN: 1}, oOPTIONS);\n        }\n    } else {\n        this.ready();\n    }\n});\n\n\nMeteor.publish('menu', function () {\n    if (this.userId) {\n        var menuAuth = MENUAUTH.find({userId: this.userId});\n        var idMenu = menuAuth.map(function (p) {\n            return p.idMENU\n        });\n        if (Roles.userIsInRole(this.userId, ['root', 'administrator'])) {\n            return MENU.find({aktifYN: 1});\n        } else {\n            return MENU.find({_id: {$in: idMenu}, aktifYN: 1});\n        }\n    } else {\n        this.ready();\n    }\n});\n\npublishData = function (sNama, sObject, oWhere, oConditions) {\n    Meteor.publish(sNama, function (iLimit, oFilter, oOptions) {\n        // gabungkan OR\n        var atauALL = [{aktifYN: 1}, {aktifYN: \"1\"}, {aktifYN: 1}];\n        if (adaDATA(oWhere[\"$or\"])) {\n            atauALL = atauALL.concat(oWhere[\"$or\"]);\n        }\n        var oFILTER_OR = oFilter[\"$or\"];\n        if (adaDATA(oFILTER_OR)) {\n            atauALL = atauALL.concat(oFilter[\"$or\"]);\n        }\n\n        // gabungkan AND\n        var andALL = [];\n        if (adaDATA(oWhere[\"$and\"])) {\n            andALL = andALL.concat(oWhere[\"$and\"]);\n        }\n        if (adaDATA(oFilter[\"$and\"])) {\n            andALL = andALL.concat(oFilter[\"$and\"]);\n        }\n\n        // gabungkan oWhere dan oFilter\n        oWhere = Object.assign({}, oWhere, oFilter);\n        oWhere[\"$or\"] = atauALL;\n        oWhere[\"$and\"] = andALL;\n\n        // gabungkan oConditions\n        oConditions = Object.assign({}, oConditions, oOptions);\n\n        if (!adaDATA(oConditions)) {\n            oConditions = {\n                sort: {createAt: -1},\n                limit: iLimit\n            };\n        }\n        oConditions.limit = iLimit * 2;\n\n        if(iLimit == 0) {\n        \tdelete oConditions.limit;\n\t\t}\n\n        if (this.userId) {\n            var data = sObject.find(oFilter, oConditions);\n            return data;\n        } else {\n            this.ready();\n        }\n    });\n};\n\n\n/**    publishData(NAME_Publications, OBJECT_Collections, OBJECT_OFilter, OBJECT_oOPTIONS)      **/\npublishData(\"menuAuthku\", MENUAUTH, {}, {});\npublishData('menuAuth', MENUAUTH, {}, {});\npublishData('activitylogs', ACTIVITYLOGS, {}, {});\npublishData('profileData', PROFILEDATA, {}, {});\npublishData('woTipe', WOTIPE, {}, {});\npublishData('woSubTipe', WOSUBTIPE, {}, {});\npublishData('woSubTipeDetail', WOSUBTIPEDETAIL, {}, {});\npublishData('wo', WO, {}, {});\npublishData('apimanager', APIMANAGER, {}, {});\n"]},"sourceType":"script","hash":"f1bdaf3abd57639438453742f614ec5faaf17229"}
