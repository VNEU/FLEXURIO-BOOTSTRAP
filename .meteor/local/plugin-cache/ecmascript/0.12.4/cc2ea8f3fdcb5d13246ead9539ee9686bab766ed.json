{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/core/editYourAvatarModal.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/core/editYourAvatarModal.js","filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/core/editYourAvatarModal.js","passPerPreset":false,"envName":"development","cwd":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","root":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/core/editYourAvatarModal.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/core/editYourAvatarModal.js"}},"code":"var Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 0);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 1);\nmodule.link(\"./editYourAvatarModal.html\");\nvar x,\n    // x position of crop image\ny,\n    // y position of crop image\nwidth,\n    // width of crop image\nheight,\n    // height of crop image\nerror,\n    //\nsaveAvatarButton,\n    modal,\n    realImage,\n    displayImage,\n    isShowCropAndButton = false;\nvar ratioImage = '1:1';\nTemplate.editYourAvatarModalBody.helpers({\n  image: function () {\n    if (Meteor.user()) return Session.get('UI_Foto');else return sAvatar;\n  },\n  sLebar: function () {\n    return Session.get('UI_Width');\n  },\n  sTinggi: function () {\n    return Session.get('UI_Height');\n  }\n});\n\nTemplate.editYourAvatarModal.rendered = function () {\n  if (Session.get('UI_Width') >= Session.get('UI_Height')) {\n    ratioImage = Math.ceil(Session.get('UI_Width') / Session.get('UI_Height')).toString() + ':1';\n  } else {\n    ratioImage = '1:' + Math.ceil(Session.get('UI_Height') / Session.get('UI_Width')).toString();\n  }\n\n  var tmpl = this; // cache the dom\n\n  modal = $(tmpl.find('#editYourAvatarModal'));\n  error = $(tmpl.find('.error'));\n  saveAvatarButton = $(tmpl.find('#saveAvatarButton'));\n  propSaveAvatarButton(false);\n  realImage = tmpl.find('#realImage');\n  modal.on('hide.bs.modal', function () {\n    clear();\n  });\n  modal.on('show.bs.modal', function () {\n    loadImage(tmpl, Session.get('UI_Foto'));\n    $(function () {\n      displayImage.imgAreaSelect({\n        aspectRatio: ratioImage,\n        handles: true,\n        fadeSpeed: 200,\n        onSelectChange: preview,\n        parent: $('.modal-content')\n      });\n    });\n  });\n};\n\nTemplate.editYourAvatarModalBody.rendered = function () {\n  if (Session.get('UI_Width') >= Session.get('UI_Height')) {\n    ratioImage = '1:' + Math.ceil(Session.get('UI_Width') / Session.get('UI_Height')).toString();\n  } else {\n    ratioImage = Math.ceil(Session.get('UI_Height') / Session.get('UI_Width')).toString() + ':1';\n  }\n\n  displayImage = $(this.find('#avatarUserImg'));\n  $(function () {\n    displayImage.imgAreaSelect({\n      aspectRatio: ratioImage,\n      handles: true,\n      fadeSpeed: 200,\n      onSelectChange: preview\n    });\n  });\n};\n\nTemplate.editYourAvatarModalBody.events({\n  \"change input[name=avatarFile]\": function (evt, tmpl) {\n    evt.preventDefault();\n    var input = tmpl.find('input[name=avatarFile]');\n\n    if (input.files && input.files[0]) {\n      FileReaderObject.previewImage(input.files[0], function (err, file) {\n        if (err) {\n          error.html(createAlertDanger(err.message));\n          Meteor.setTimeout(function () {\n            error.html('');\n          }, 5000);\n        } else {\n          loadImage(tmpl, file.result);\n          $(function () {\n            displayImage.imgAreaSelect({\n              aspectRatio: ratioImage,\n              handles: true,\n              fadeSpeed: 200,\n              onSelectChange: preview\n            });\n          });\n        }\n      });\n    }\n  },\n  'click #changeAvatarButton': function (evt, tmp) {\n    evt.preventDefault();\n    tmp.find('input[name=avatarFile]').click();\n  }\n});\nTemplate.editYourAvatarModal.events({\n  'click #changeAvatarButton': function (evt, tmp) {\n    evt.preventDefault();\n    tmp.find('input[name=avatarFile]').click();\n  },\n  'click #saveAvatarButton': function (evt, tmp) {\n    evt.preventDefault();\n    processChangeAvatar(tmp);\n  },\n  'keypress': function (evt, tmp) {\n    if (evt.charCode == 13) {\n      evt.preventDefault();\n      modal.modal('hide');\n    }\n  }\n});\n/**\n * FUNCTION CLASS DEFINE\n */\n\nvar processChangeAvatar = function (tmp) {\n  var canvas = document.createElement(\"canvas\");\n  canvas.width = Session.get('UI_Width');\n  canvas.height = Session.get('UI_Height');\n  var scaleX = realImage.width / displayImage.width();\n  var scaleY = realImage.height / displayImage.height();\n  var ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(realImage, x * scaleX, y * scaleY, width * scaleX, height * scaleY, 0, 0, Session.get('UI_Width'), Session.get('UI_Height'));\n  var sMethods = Session.get('UI_Methods');\n  Meteor.call(sMethods, canvas.toDataURL(), Session.get(\"UI_ID\"), function (err, res) {\n    if (err) {\n      error.html(createAlertDanger(err.message));\n      Meteor.setTimeout(function () {\n        error.html('');\n      }, 5000);\n    } else {\n      modal.modal('hide');\n    }\n  });\n};\n\nfunction preview(img, selection) {\n  if (!selection.width || !selection.height) return;\n  var scaleX = Session.get('UI_Width') / selection.width;\n  var scaleY = Session.get('UI_Height') / selection.height;\n  $('#preview img').css({\n    width: Math.round(scaleX * img.width),\n    height: Math.round(scaleY * img.height),\n    marginLeft: -Math.round(scaleX * selection.x1),\n    marginTop: -Math.round(scaleY * selection.y1)\n  });\n  x = selection.x1;\n  y = selection.y1;\n  width = selection.width;\n  height = selection.height;\n\n  if (!isShowCropAndButton) {\n    open();\n  }\n}\n\n;\n\nfunction propSaveAvatarButton(bool) {\n  if (saveAvatarButton) {\n    saveAvatarButton.prop('disabled', !bool);\n  }\n}\n\n;\n\nfunction loadImage(tmp, src) {\n  $(tmp.find('#avatarUserImg')).attr('src', src);\n  $(tmp.find('#preview img')).attr('src', src);\n  $(tmp.find('#realImage')).attr('src', src);\n}\n\n;\n\nfunction open() {\n  propSaveAvatarButton(true);\n  $('#previewFrame').removeClass('hide');\n  isShowCropAndButton = true;\n}\n\n;\n\nfunction clear() {\n  // hide crop area\n  $('.imgareaselect-border1').parent().hide();\n  $('.imgareaselect-outer').hide();\n  isShowCropAndButton = false;\n  $('#previewFrame').addClass('hide'); // reset input\n  //http://stackoverflow.com/questions/16452699/how-to-reset-a-form-using-jquery-with-reset-method\n\n  var inputAvatar = $('input[name=avatarFile]');\n  inputAvatar.wrap('<form>').closest('form').get(0).reset();\n  inputAvatar.unwrap();\n}\n\n;\n/**\n * =====================================================================================================================\n * AVATAR DEFAULT BASE64\n */\n\nAVATAR = \"data:image/jpeg;base64,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\";\nFILEUPLOAD = {\n  IMG: {\n    TYPE: [\"image/jpeg\", \"image/png\"],\n    MAXSIZE: 512000\n  },\n  // 512 kb\n  DOC: []\n};\n\nvalidateImgBase64 = function (src) {\n  if (!/^data:image\\/png;base64,/i.test(src)) {\n    throw new Error(\"Image is not decode 1\");\n  }\n\n  return true;\n};\n\ncreateAlert = {\n  'error': function (message) {\n    return '<div class=\"alert alert-danger\">' + message + '</div>';\n  },\n  'success': function (message) {\n    return '<div class=\"alert alert-success\">' + message + '</div>';\n  },\n  'alert': function (message) {\n    return '<div class=\"alert alert-warning\">' + message + '</div>';\n  },\n  'info': function (message) {\n    return '<div class=\"alert alert-info\">' + message + '</div>';\n  },\n  'default': function (message) {\n    return '<div class=\"alert\">' + message + '</div>';\n  }\n};\n\ncreateAlertDanger = function (message) {\n  return createAlert['error'](message);\n};\n\ncreateAlertSuccess = function (message) {\n  return createAlert['success'](message);\n};\n\ncreateAlertInfo = function (message) {\n  return createAlert['info'](message);\n};\n/*\n * =====================================================================================================================\n */","map":{"version":3,"sources":["client/views/core/editYourAvatarModal.js"],"names":["Template","module","link","v","Session","x","y","width","height","error","saveAvatarButton","modal","realImage","displayImage","isShowCropAndButton","ratioImage","editYourAvatarModalBody","helpers","image","Meteor","user","get","sAvatar","sLebar","sTinggi","editYourAvatarModal","rendered","Math","ceil","toString","tmpl","$","find","propSaveAvatarButton","on","clear","loadImage","imgAreaSelect","aspectRatio","handles","fadeSpeed","onSelectChange","preview","parent","events","evt","preventDefault","input","files","FileReaderObject","previewImage","err","file","html","createAlertDanger","message","setTimeout","result","tmp","click","processChangeAvatar","charCode","canvas","document","createElement","scaleX","scaleY","ctx","getContext","drawImage","sMethods","call","toDataURL","res","img","selection","css","round","marginLeft","x1","marginTop","y1","open","bool","prop","src","attr","removeClass","hide","addClass","inputAvatar","wrap","closest","reset","unwrap","AVATAR","FILEUPLOAD","IMG","TYPE","MAXSIZE","DOC","validateImgBase64","test","Error","createAlert","createAlertSuccess","createAlertInfo"],"mappings":"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","sourcesContent":["import { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport './editYourAvatarModal.html';\n\nvar x, // x position of crop image\n\ty, // y position of crop image\n\twidth, // width of crop image\n\theight, // height of crop image\n\terror, //\n\tsaveAvatarButton,\n\tmodal,\n\trealImage,\n\tdisplayImage,\n\tisShowCropAndButton = false;\n\nvar ratioImage = '1:1';\n\nTemplate.editYourAvatarModalBody.helpers({\n\timage: function () {\n\t\tif (Meteor.user())\n\t\t\treturn Session.get('UI_Foto');\n\t\telse\n\t\t\treturn sAvatar;\n\t},\n\tsLebar: function(){\n\t\treturn Session.get('UI_Width');\n\t},\n\tsTinggi: function(){\n\t\treturn Session.get('UI_Height');\n\t}\n\n});\n\nTemplate.editYourAvatarModal.rendered = function () {\n\tif(Session.get('UI_Width') >= Session.get('UI_Height')) {\n\t\tratioImage = Math.ceil(Session.get('UI_Width')/Session.get('UI_Height')).toString() + ':1';\n\t} else {\n\t\tratioImage = '1:' + Math.ceil(Session.get('UI_Height')/Session.get('UI_Width')).toString();\n\t}\n\n\tlet tmpl = this;\n\t// cache the dom\n\tmodal = $(tmpl.find('#editYourAvatarModal'));\n\terror = $(tmpl.find('.error'));\n\tsaveAvatarButton = $(tmpl.find('#saveAvatarButton'));\n\tpropSaveAvatarButton(false);\n\trealImage = tmpl.find('#realImage');\n\tmodal.on('hide.bs.modal', function () {\n\t\tclear();\n\t});\n\tmodal.on('show.bs.modal', function () {\n\t\tloadImage(tmpl, Session.get('UI_Foto'));\n\t\t$(function () {\n\t\t\tdisplayImage.imgAreaSelect({\n\t\t\t\taspectRatio: ratioImage, handles: true,\n\t\t\t\tfadeSpeed: 200, onSelectChange: preview, parent: $('.modal-content')\n\t\t\t});\n\t\t});\n\t});\n};\n\nTemplate.editYourAvatarModalBody.rendered = function () {\n\tif(Session.get('UI_Width') >= Session.get('UI_Height')) {\n\t\tratioImage = '1:' + Math.ceil(Session.get('UI_Width')/Session.get('UI_Height')).toString();\n\t} else {\n\t\tratioImage = Math.ceil(Session.get('UI_Height')/Session.get('UI_Width')).toString() + ':1';\n\t}\n\n\tdisplayImage = $(this.find('#avatarUserImg'));\n\t$(function () {\n\t\tdisplayImage.imgAreaSelect({\n\t\t\taspectRatio: ratioImage, handles: true,\n\t\t\tfadeSpeed: 200, onSelectChange: preview\n\t\t});\n\t});\n};\n\nTemplate.editYourAvatarModalBody.events({\n\t\"change input[name=avatarFile]\": function (evt, tmpl) {\n\t\tevt.preventDefault();\n\t\tlet input = tmpl.find('input[name=avatarFile]');\n\t\tif (input.files && input.files[0]) {\n\t\t\tFileReaderObject.previewImage(input.files[0], function (err, file) {\n\t\t\t\tif (err) {\n\t\t\t\t\terror.html(createAlertDanger(err.message));\n\t\t\t\t\tMeteor.setTimeout(function () {\n\t\t\t\t\t\terror.html('');\n\t\t\t\t\t}, 5000);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tloadImage(tmpl, file.result);\n\t\t\t\t\t$(function () {\n\t\t\t\t\t\tdisplayImage.imgAreaSelect({\n\t\t\t\t\t\t\taspectRatio: ratioImage, handles: true,\n\t\t\t\t\t\t\tfadeSpeed: 200, onSelectChange: preview\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t'click #changeAvatarButton': function (evt, tmp) {\n\t\tevt.preventDefault();\n\t\ttmp.find('input[name=avatarFile]').click();\n\t}\n});\nTemplate.editYourAvatarModal.events({\n\t'click #changeAvatarButton': function (evt, tmp) {\n\t\tevt.preventDefault();\n\t\ttmp.find('input[name=avatarFile]').click();\n\t},\n\t'click #saveAvatarButton': function (evt, tmp) {\n\t\tevt.preventDefault();\n\t\tprocessChangeAvatar(tmp);\n\t},\n\t'keypress': function (evt, tmp) {\n\t\tif (evt.charCode == 13) {\n\t\t\tevt.preventDefault();\n\t\t\tmodal.modal('hide');\n\t\t}\n\t}\n});\n/**\n * FUNCTION CLASS DEFINE\n */\nvar processChangeAvatar = function (tmp) {\n\tlet canvas = document.createElement(\"canvas\");\n\tcanvas.width = Session.get('UI_Width');\n\tcanvas.height = Session.get('UI_Height');\n\tlet scaleX = realImage.width / displayImage.width();\n\tlet scaleY = realImage.height / displayImage.height();\n\tlet ctx = canvas.getContext(\"2d\");\n\tctx.drawImage(realImage, x * scaleX, y * scaleY, width * scaleX, height * scaleY, 0, 0, Session.get('UI_Width'), Session.get('UI_Height'));\n\n\tlet sMethods = Session.get('UI_Methods');\n\n\tMeteor.call(sMethods, canvas.toDataURL(), Session.get(\"UI_ID\"), function (err, res) {\n\t\tif (err) {\n\t\t\terror.html(createAlertDanger(err.message));\n\t\t\tMeteor.setTimeout(function () {\n\t\t\t\terror.html('');\n\t\t\t}, 5000);\n\t\t}\n\t\telse {\n\t\t\tmodal.modal('hide');\n\t\t}\n\t});\n};\n\nfunction preview(img, selection) {\n\tif (!selection.width || !selection.height)\n\t\treturn;\n\tlet scaleX = Session.get('UI_Width') / selection.width;\n\tlet scaleY = Session.get('UI_Height') / selection.height;\n\t$('#preview img').css({\n\t\twidth: Math.round(scaleX * img.width),\n\t\theight: Math.round(scaleY * img.height),\n\t\tmarginLeft: -Math.round(scaleX * selection.x1),\n\t\tmarginTop: -Math.round(scaleY * selection.y1)\n\t});\n\tx = selection.x1;\n\ty = selection.y1;\n\twidth = selection.width;\n\theight = selection.height;\n\tif (!isShowCropAndButton) {\n\t\topen();\n\t}\n};\nfunction propSaveAvatarButton(bool) {\n\tif (saveAvatarButton) {\n\t\tsaveAvatarButton.prop('disabled', !bool);\n\t}\n};\nfunction loadImage(tmp, src) {\n\t$(tmp.find('#avatarUserImg')).attr('src', src);\n\t$(tmp.find('#preview img')).attr('src', src);\n\t$(tmp.find('#realImage')).attr('src', src);\n};\nfunction open() {\n\tpropSaveAvatarButton(true);\n\t$('#previewFrame').removeClass('hide');\n\tisShowCropAndButton = true;\n};\nfunction clear() {\n\t// hide crop area\n\t$('.imgareaselect-border1').parent().hide();\n\t$('.imgareaselect-outer').hide();\n\tisShowCropAndButton = false;\n\t$('#previewFrame').addClass('hide');\n\t// reset input\n\t//http://stackoverflow.com/questions/16452699/how-to-reset-a-form-using-jquery-with-reset-method\n\tlet inputAvatar = $('input[name=avatarFile]');\n\tinputAvatar.wrap('<form>').closest('form').get(0).reset();\n\tinputAvatar.unwrap();\n};\n\n/**\n * =====================================================================================================================\n * AVATAR DEFAULT BASE64\n */\nAVATAR = \"data:image/jpeg;base64,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\";\nFILEUPLOAD = {\n    IMG : {  TYPE: [\"image/jpeg\", \"image/png\"], MAXSIZE: 512000  },// 512 kb\n    DOC : []\n};\nvalidateImgBase64 = function(src){\n    if(!/^data:image\\/png;base64,/i.test(src)){\n        throw new Error(\"Image is not decode 1\");\n    }\n    return true;\n};\ncreateAlert = {\n    'error' : function(message) {\n        return '<div class=\"alert alert-danger\">' + message + '</div>';\n    },\n    'success' : function(message) {\n        return '<div class=\"alert alert-success\">' + message + '</div>';\n    },\n    'alert' : function(message) {\n        return '<div class=\"alert alert-warning\">' + message + '</div>';\n    },\n    'info' : function(message) {\n        return '<div class=\"alert alert-info\">' + message + '</div>';\n    },\n    'default' : function(message) {\n        return '<div class=\"alert\">' + message + '</div>';\n    }\n};\ncreateAlertDanger = function(message) {\n    return createAlert['error'](message);\n};\ncreateAlertSuccess = function(message) {\n    return createAlert['success'](message);\n};\ncreateAlertInfo = function(message){\n    return createAlert['info'](message);\n};\n\n/*\n * =====================================================================================================================\n */\n"]},"sourceType":"script","hash":"cc2ea8f3fdcb5d13246ead9539ee9686bab766ed"}
