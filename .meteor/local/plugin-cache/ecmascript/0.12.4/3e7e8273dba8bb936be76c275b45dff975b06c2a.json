{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/workorder/wo.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/workorder/wo.js","filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/workorder/wo.js","passPerPreset":false,"envName":"development","cwd":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","root":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/jayuda/Documents/PROJECT/FLEXURIO/FLEXURIO-BOOTSTRAP/client/views/workorder/wo.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/workorder/wo.js"}},"code":"var Template;\nmodule.link(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 0);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 1);\nmodule.link(\"./wo.html\");\n\nTemplate.wo.created = function () {\n  Session.set('limit', 50);\n  Session.set('oFILTERS', {});\n  Session.set('oOPTIONS', {});\n  Session.set('namaHeader', 'WORK ORDER');\n  Session.set('dataDelete', '');\n  Session.set('isCreating', false);\n  Session.set('isEditing', false);\n  Session.set('idSignTo', \"\");\n  subscribtion('woTipe', {\n    aktifYN: 1\n  }, {}, 0);\n  subscribtion('woSubTipe', {\n    aktifYN: 1\n  }, {}, 0);\n  subscribtion('woSubTipeDetail', {\n    aktifYN: 1\n  }, {}, 0);\n  this.autorun(function () {\n    subscribtion('wo', Session.get('oFILTERS'), Session.get('oOPTIONS'), Session.get('limit'));\n  });\n};\n\nTemplate.wo.onRendered(function () {\n  ScrollHandler();\n});\nTemplate.wo.helpers({\n  isLockMenu: function () {\n    return isLockMenu();\n  },\n  isStop: function () {\n    if (this.status !== \"FINISH\") {\n      if (this.status === \"START\") {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  },\n  isPlay: function () {\n    if (this.status !== \"FINISH\") {\n      return this.signToID === UserID() | isRoleAdmin(UserID());\n    } else {\n      return false;\n    }\n  },\n  members: function () {\n    return MEMBER.find({}, {\n      sort: {\n        'profile.name': 1\n      }\n    });\n  },\n  subTipeWODetailDATA: function () {\n    return WOSUBTIPEDETAIL.find({\n      kodeWOSUBTIPE: Session.get(\"subTipeWO\"),\n      aktifYN: 1\n    }, {\n      sort: {\n        namaWOSUBTIPEDETAIL: 1\n      }\n    });\n  },\n  subTipeWODATA: function () {\n    return WOSUBTIPE.find({\n      kodeWOTIPE: Session.get(\"tipeWOID\"),\n      aktifYN: 1\n    }, {\n      sort: {\n        namaWOSUBTIPE: 1\n      }\n    });\n  },\n  woTipeDATA: function () {\n    return WOTIPE.find({\n      aktifYN: 1\n    }, {\n      sort: {\n        namaWOTIPE: 1\n      }\n    });\n  },\n  isSignTo: function () {\n    return Session.get('isSignTo');\n  },\n  isEditing: function () {\n    if (this.status !== \"FINISH\") {\n      return Session.get('idEditing') === this._id;\n    } else {\n      return false;\n    }\n  },\n  isCreating: function () {\n    return Session.get('isCreating');\n  },\n  wos: function () {\n    var textSearch = '';\n\n    if (adaDATA(Session.get('textSearch'))) {\n      textSearch = Session.get('textSearch').replace('#', '').trim();\n    }\n\n    var oFILTERS = {\n      $or: [{\n        namaWO: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        tipeWO: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        detailTipeWO: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        keteranganWO: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        createBy: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        tipeWO: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        _id: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        status: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }, {\n        signTo: {\n          $regex: textSearch,\n          $options: 'i'\n        }\n      }],\n      aktifYN: 1\n    };\n\n    if (!isRoleAdmin(UserID())) {\n      oFILTERS.createByID = UserID();\n    }\n\n    var oOPTIONS = {\n      sort: {\n        createAt: -1\n      },\n      limit: Session.get('limit')\n    };\n    Session.set('oOPTIONS', oOPTIONS);\n    Session.set('oFILTERS', oFILTERS);\n    return WO.find(oFILTERS, oOPTIONS);\n  }\n});\nTemplate.wo.events({\n  'click a.report': function (e, tpl) {\n    e.preventDefault();\n\n    if (this.status !== \"FINISH\") {\n      var sReportName = this.namaWO;\n      var sReportNumber = this.tipeWO + ' - ' + this.subTipeWO;\n      var sReportFootNote = this.createBy + '<BR>' + this.createAt;\n      var sCollections = \"wo\";\n      var sBackUrl = \"wo\";\n      var cCollectionsInitial = WO;\n      var aReportFilter = {\n        aktifYN: 1,\n        _id: this._id\n      };\n      var aReportOptions = {\n        fields: {\n          keteranganWO: 1\n        }\n      };\n      var oReportFieldDisplay = [{\n        \"NAMA\": this.detailTipeWO,\n        \"fields\": \"keteranganWO\"\n      }];\n      setREPORT(sReportName, sReportNumber, sReportFootNote, sCollections, sBackUrl, cCollectionsInitial, aReportFilter, aReportOptions, oReportFieldDisplay);\n    } else {\n      FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n    }\n  },\n  'change #subTipeWO': function (e, tpl) {\n    e.preventDefault();\n    var ID_tipeWODipilih = tpl.$('select[name=\"subTipeWO\"]').val();\n    Session.set(\"subTipeWO\", ID_tipeWODipilih);\n  },\n  'change #tipeWO': function (e, tpl) {\n    e.preventDefault();\n    var ID_tipeWODipilih = tpl.$('select[name=\"tipeWO\"]').val();\n    Session.set(\"tipeWOID\", ID_tipeWODipilih);\n  },\n  'click a.cancel': function (e, tpl) {\n    e.preventDefault();\n    Session.set('isCreating', false);\n    Session.set('isEditing', false);\n    Session.set('idEditing', '');\n    Session.set('idSignTo', null);\n    Session.set('isSignTo', false);\n  },\n  'click a.deleteDataOK': function (e, tpl) {\n    e.preventDefault();\n    deleteWO();\n    FlashMessages.sendWarning('Attention, ' + Session.get('dataDelete') + ' successfully DELETE !');\n    $(\"#modal_formDeleting\").modal('hide');\n  },\n  'click a.deleteData': function (e, tpl) {\n    e.preventDefault();\n\n    if (this.status !== \"FINISH\") {\n      Session.set('dataDelete', Session.get('namaHeader').toLowerCase() + ' ' + this.namaWO);\n      Session.set('idDeleting', this._id);\n      $(\"#modal_formDeleting\").modal('show');\n    } else {\n      FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n    }\n  },\n  'click a.signTo': function (e, tpl) {\n    e.preventDefault();\n\n    if (this.status !== \"FINISH\") {\n      Session.set('idSignTo', this._id);\n      Session.set('isSignTo', true);\n    } else {\n      FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n    }\n  },\n  'click a.create': function (e, tpl) {\n    e.preventDefault();\n    Session.set('isCreating', true);\n  },\n  'keyup #namaWO': function (e, tpl) {\n    e.preventDefault();\n\n    if (e.keyCode == 13) {\n      insertWO(tpl);\n    }\n  },\n  'click a.save': function (e, tpl) {\n    e.preventDefault();\n    insertWO(tpl);\n  },\n  'click a.saveSignTo': function (e, tpl) {\n    e.preventDefault();\n    updatePIC(tpl);\n  },\n  'click a.editData': function (e, tpl) {\n    e.preventDefault();\n\n    if (this.status !== \"FINISH\") {\n      Session.set('idEditing', this._id);\n    } else {\n      FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n    }\n  },\n  'keyup #namaEditWO': function (e, tpl) {\n    e.preventDefault();\n\n    if (e.keyCode == 13) {\n      updateWO(tpl);\n    }\n  },\n  'click a.saveEDIT': function (e, tpl) {\n    e.preventDefault();\n    updateWO(tpl);\n  },\n  \"submit form.form-comments\": function (e, tpl) {\n    e.preventDefault();\n    flxcomments(e, tpl, WO);\n  },\n  'click a.play': function (e, tpl) {\n    e.preventDefault();\n    WO.update({\n      _id: this._id\n    }, {\n      $set: {\n        status: \"START\",\n        statusBy: UserName(),\n        statusByID: UserID()\n      }\n    }, function (err, id) {\n      if (err) {\n        FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n      } else {\n        Session.set('idEditing', '');\n        FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n      }\n    });\n  },\n  'click a.stop': function (e, tpl) {\n    e.preventDefault();\n    WO.update({\n      _id: this._id\n    }, {\n      $set: {\n        status: \"FINISH\",\n        statusBy: UserName(),\n        statusByID: UserID()\n      }\n    }, function (err, id) {\n      if (err) {\n        FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n      } else {\n        Session.set('idEditing', '');\n        FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n      }\n    });\n  }\n});\n\ninsertWO = function (tpl) {\n  var namaWO = tpl.$('input[name=\"namaWO\"]').val();\n  var tipeWO = SelectedTerpilih(\"tipeWO\");\n  var subTipeWO = SelectedTerpilih(\"subTipeWO\");\n  var detailTipeWO = SelectedTerpilih(\"detailTipeWO\");\n  var keteranganWO = tpl.$('textarea[name=\"keteranganWO\"]').val();\n\n  if (!adaDATA(namaWO) | !adaDATA(tipeWO) | !adaDATA(subTipeWO) | !adaDATA(detailTipeWO) | !adaDATA(keteranganWO)) {\n    FlashMessages.sendWarning('Please complete all of the data to be . . .');\n    return;\n  }\n\n  WO.insert({\n    namaWO: namaWO,\n    tipeWO: tipeWO,\n    subTipeWO: subTipeWO,\n    detailTipeWO: detailTipeWO,\n    keteranganWO: keteranganWO,\n    aktifYN: 1,\n    status: \"INPUT\",\n    signByID: \"-\",\n    signBy: \"-\",\n    signAt: \"-\",\n    signTo: \"-\",\n    closeByID: \"-\",\n    closeBy: \"-\",\n    closeAt: \"-\",\n    createByID: UserID(),\n    createBy: UserName(),\n    createAt: new Date()\n  }, function (err, id) {\n    if (err) {\n      FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n    } else {\n      Session.set('isCreating', false);\n      FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n    }\n  });\n};\n\nupdatePIC = function (tpl) {\n  var id = tpl.$('select[name=\"signTo\"]').val();\n  var nama = SelectedTerpilih(\"signTo\");\n\n  if (!adaDATA(nama)) {\n    FlashMessages.sendWarning('Please complete all of the data to be . . .');\n    return;\n  } else {\n    var nama = MEMBER.findOne({\n      _id: id\n    }).profile.name;\n  }\n\n  WO.update({\n    _id: Session.get('idSignTo')\n  }, {\n    $set: {\n      signByID: UserID(),\n      signBy: UserName(),\n      signAt: new Date(),\n      signTo: nama,\n      status: \"SIGN PIC\",\n      signToID: id\n    }\n  }, function (err, id) {\n    if (err) {\n      FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n    } else {\n      Session.set('idEditing', '');\n      FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n    }\n  });\n  addTodo(\"SIGN PIC WO\", \"Hello \" + nama + \", Anda telah di minta menjadi PIC untuk Pekerjaan baru. Mohon lihat WO Menu\", sURL + \"wo\", Session.get('idSignTo'), nama, id);\n  Session.set('idSignTo', null);\n  Session.set('isSignTo', false);\n};\n\nupdateWO = function (tpl) {\n  var keteranganWO = tpl.$('input[name=\"keteranganEditWO\"]').val();\n\n  if (!adaDATA(keteranganWO)) {\n    FlashMessages.sendWarning('Please complete all of the data to be . . .');\n    return;\n  }\n\n  WO.update({\n    _id: Session.get('idEditing')\n  }, {\n    $set: {\n      keteranganWO: keteranganWO\n    }\n  }, function (err, id) {\n    if (err) {\n      FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n    } else {\n      Session.set('idEditing', '');\n      FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n    }\n  });\n};\n\ndeleteWO = function () {\n  if (!adaDATA(Session.get('idDeleting'))) {\n    FlashMessages.sendWarning('Please select data that you want to remove . . .');\n    return;\n  }\n\n  WO.update({\n    _id: Session.get('idDeleting')\n  }, {\n    $set: {\n      aktifYN: 0,\n      deleteByID: UserID(),\n      deleteBy: UserName(),\n      deleteAt: new Date()\n    }\n  }, function (err, id) {\n    if (err) {\n      FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n    } else {\n      Session.set('idEditing', '');\n      FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n    }\n  });\n};","map":{"version":3,"sources":["client/views/workorder/wo.js"],"names":["Template","module","link","v","Session","wo","created","set","subscribtion","aktifYN","autorun","get","onRendered","ScrollHandler","helpers","isLockMenu","isStop","status","isPlay","signToID","UserID","isRoleAdmin","members","MEMBER","find","sort","subTipeWODetailDATA","WOSUBTIPEDETAIL","kodeWOSUBTIPE","namaWOSUBTIPEDETAIL","subTipeWODATA","WOSUBTIPE","kodeWOTIPE","namaWOSUBTIPE","woTipeDATA","WOTIPE","namaWOTIPE","isSignTo","isEditing","_id","isCreating","wos","textSearch","adaDATA","replace","trim","oFILTERS","$or","namaWO","$regex","$options","tipeWO","detailTipeWO","keteranganWO","createBy","signTo","createByID","oOPTIONS","createAt","limit","WO","events","e","tpl","preventDefault","sReportName","sReportNumber","subTipeWO","sReportFootNote","sCollections","sBackUrl","cCollectionsInitial","aReportFilter","aReportOptions","fields","oReportFieldDisplay","setREPORT","FlashMessages","sendWarning","ID_tipeWODipilih","$","val","deleteWO","modal","toLowerCase","keyCode","insertWO","updatePIC","updateWO","flxcomments","update","$set","statusBy","UserName","statusByID","err","id","sendSuccess","SelectedTerpilih","insert","signByID","signBy","signAt","closeByID","closeBy","closeAt","Date","nama","findOne","profile","name","addTodo","sURL","deleteByID","deleteBy","deleteAt"],"mappings":"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","sourcesContent":["/**\n * Generated from flexurio tools\n * Flexurio By Pamungkas Jayuda yulius.jayuda@gmail.com / +628119003077\n */\n\n\nimport {Template} from \"meteor/templating\";\nimport {Session} from \"meteor/session\";\nimport \"./wo.html\";\n\nTemplate.wo.created = function () {\n    Session.set('limit', 50); Session.set('oFILTERS', {}); Session.set('oOPTIONS', {});\n    Session.set('namaHeader', 'WORK ORDER');\n    Session.set('dataDelete', '');\n    Session.set('isCreating', false); Session.set('isEditing', false);\n\n    Session.set('idSignTo', \"\");\n\n    subscribtion('woTipe', {aktifYN: 1}, {}, 0);\n    subscribtion('woSubTipe', {aktifYN: 1}, {}, 0);\n    subscribtion('woSubTipeDetail', {aktifYN: 1}, {}, 0);\n\n    this.autorun(function () {\n        subscribtion('wo', Session.get('oFILTERS'), Session.get('oOPTIONS'), Session.get('limit'));\n    });\n};\n\nTemplate.wo.onRendered(function () {\n    ScrollHandler();\n});\n\n\nTemplate.wo.helpers({\n    isLockMenu: function () {\n        return isLockMenu();\n    },\n\n    isStop: function () {\n        if (this.status !== \"FINISH\") {\n            if (this.status === \"START\") {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            return false;\n        }\n    },\n    isPlay: function () {\n        if (this.status !== \"FINISH\") {\n            return this.signToID === UserID() | isRoleAdmin(UserID());\n        } else {\n            return false;\n        }\n    },\n    members: function () {\n        return MEMBER.find({}, {sort: {'profile.name': 1}})\n    },\n    subTipeWODetailDATA: function () {\n        return WOSUBTIPEDETAIL.find({kodeWOSUBTIPE: Session.get(\"subTipeWO\"), aktifYN: 1}, {sort: {namaWOSUBTIPEDETAIL: 1}});\n    },\n    subTipeWODATA: function () {\n        return WOSUBTIPE.find({kodeWOTIPE: Session.get(\"tipeWOID\"), aktifYN: 1}, {sort: {namaWOSUBTIPE: 1}});\n    },\n    woTipeDATA: function () {\n        return WOTIPE.find({aktifYN: 1}, {sort: {namaWOTIPE: 1}});\n    },\n    isSignTo: function () {\n        return Session.get('isSignTo');\n    },\n    isEditing: function () {\n        if (this.status !== \"FINISH\") {\n            return Session.get('idEditing') === this._id;\n        } else {\n            return false;\n        }\n    },\n    isCreating: function () {\n        return Session.get('isCreating');\n    },\n    wos: function () {\n        var textSearch = '';\n        if (adaDATA(Session.get('textSearch'))) {\n            textSearch = Session.get('textSearch').replace('#', '').trim();\n        }\n\n        var oFILTERS = {\n            $or: [\n                {namaWO: {$regex: textSearch, $options: 'i'}},\n                {tipeWO: {$regex: textSearch, $options: 'i'}},\n                {detailTipeWO: {$regex: textSearch, $options: 'i'}},\n                {keteranganWO: {$regex: textSearch, $options: 'i'}},\n                {createBy: {$regex: textSearch, $options: 'i'}},\n                {tipeWO: {$regex: textSearch, $options: 'i'}},\n                {_id: {$regex: textSearch, $options: 'i'}},\n                {status: {$regex: textSearch, $options: 'i'}},\n                {signTo: {$regex: textSearch, $options: 'i'}}\n            ],\n            aktifYN: 1\n        };\n\n        if (!isRoleAdmin(UserID())) {\n            oFILTERS.createByID = UserID();\n        }\n\n        var oOPTIONS = {\n            sort: {createAt: -1},\n            limit: Session.get('limit')\n        };\n\n        Session.set('oOPTIONS', oOPTIONS);\n        Session.set('oFILTERS', oFILTERS);\n        return WO.find(\n            oFILTERS,\n            oOPTIONS\n        );\n    }\n});\n\nTemplate.wo.events({\n    'click a.report': function (e, tpl) {\n        e.preventDefault();\n\n        if (this.status !== \"FINISH\") {\n            var sReportName = this.namaWO;\n            var sReportNumber = this.tipeWO + ' - ' + this.subTipeWO;\n            var sReportFootNote = this.createBy + '<BR>' + this.createAt;\n            var sCollections = \"wo\";\n            var sBackUrl = \"wo\";\n            var cCollectionsInitial = WO;\n            var aReportFilter = {aktifYN: 1, _id: this._id};\n            var aReportOptions = {\n                fields: {\n                    keteranganWO: 1\n                }\n            };\n            var oReportFieldDisplay = [\n                {\"NAMA\": this.detailTipeWO, \"fields\": \"keteranganWO\"}\n            ];\n\n            setREPORT(sReportName, sReportNumber, sReportFootNote, sCollections, sBackUrl, cCollectionsInitial, aReportFilter, aReportOptions, oReportFieldDisplay);\n        } else {\n            FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n        }\n    },\n    'change #subTipeWO': function (e, tpl) {\n        e.preventDefault();\n        var ID_tipeWODipilih = tpl.$('select[name=\"subTipeWO\"]').val();\n        Session.set(\"subTipeWO\", ID_tipeWODipilih);\n    },\n    'change #tipeWO': function (e, tpl) {\n        e.preventDefault();\n        var ID_tipeWODipilih = tpl.$('select[name=\"tipeWO\"]').val();\n        Session.set(\"tipeWOID\", ID_tipeWODipilih);\n    },\n    'click a.cancel': function (e, tpl) {\n        e.preventDefault();\n        Session.set('isCreating', false); Session.set('isEditing', false);\n        Session.set('idEditing', '');\n\n        Session.set('idSignTo', null);\n        Session.set('isSignTo', false);\n    },\n\n    'click a.deleteDataOK': function (e, tpl) {\n        e.preventDefault();\n        deleteWO();\n        FlashMessages.sendWarning('Attention, ' + Session.get('dataDelete') + ' successfully DELETE !');\n        $(\"#modal_formDeleting\").modal('hide');\n    },\n    'click a.deleteData': function (e, tpl) {\n        e.preventDefault();\n        if (this.status !== \"FINISH\") {\n            Session.set('dataDelete', Session.get('namaHeader').toLowerCase() + ' ' + this.namaWO);\n            Session.set('idDeleting', this._id);\n            $(\"#modal_formDeleting\").modal('show');\n        } else {\n            FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n        }\n    },\n\n    'click a.signTo': function (e, tpl) {\n        e.preventDefault();\n\n        if (this.status !== \"FINISH\") {\n            Session.set('idSignTo', this._id);\n            Session.set('isSignTo', true);\n        } else {\n            FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n        }\n\n    },\n\n    'click a.create': function (e, tpl) {\n        e.preventDefault();\n        Session.set('isCreating', true);\n    },\n    'keyup #namaWO': function (e, tpl) {\n        e.preventDefault();\n        if (e.keyCode == 13) {\n            insertWO(tpl);\n        }\n    },\n    'click a.save': function (e, tpl) {\n        e.preventDefault();\n        insertWO(tpl);\n    },\n\n    'click a.saveSignTo': function (e, tpl) {\n        e.preventDefault();\n        updatePIC(tpl);\n    },\n\n    'click a.editData': function (e, tpl) {\n        e.preventDefault();\n        if (this.status !== \"FINISH\") {\n            Session.set('idEditing', this._id);\n        } else {\n            FlashMessages.sendWarning('Attention, This WO has been FINISH !');\n        }\n    },\n    'keyup #namaEditWO': function (e, tpl) {\n        e.preventDefault();\n        if (e.keyCode == 13) {\n            updateWO(tpl);\n        }\n    },\n    'click a.saveEDIT': function (e, tpl) {\n        e.preventDefault();\n        updateWO(tpl);\n    },\n    \"submit form.form-comments\": function (e, tpl) {\n        e.preventDefault();\n        flxcomments(e,tpl,WO);\n    },\n    'click a.play': function (e, tpl) {\n        e.preventDefault();\n        WO.update({_id: this._id},\n            {\n                $set: {\n                    status: \"START\",\n                    statusBy: UserName(),\n                    statusByID: UserID()\n                }\n            },\n            function (err, id) {\n                if (err) {\n                    FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n                } else {\n                    Session.set('idEditing', '');\n                    FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n                }\n            }\n        );\n\n    },\n    'click a.stop': function (e, tpl) {\n        e.preventDefault();\n        WO.update({_id: this._id},\n            {\n                $set: {\n                    status: \"FINISH\",\n                    statusBy: UserName(),\n                    statusByID: UserID()\n                }\n            },\n            function (err, id) {\n                if (err) {\n                    FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n                } else {\n                    Session.set('idEditing', '');\n                    FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n                }\n            }\n        );\n\n    }\n\n\n});\n\n\ninsertWO = function (tpl) {\n\n    var namaWO = tpl.$('input[name=\"namaWO\"]').val();\n    var tipeWO = SelectedTerpilih(\"tipeWO\");\n    var subTipeWO = SelectedTerpilih(\"subTipeWO\");\n    var detailTipeWO = SelectedTerpilih(\"detailTipeWO\");\n    var keteranganWO = tpl.$('textarea[name=\"keteranganWO\"]').val();\n\n    if (!adaDATA(namaWO) | !adaDATA(tipeWO) | !adaDATA(subTipeWO) | !adaDATA(detailTipeWO) | !adaDATA(keteranganWO)) {\n        FlashMessages.sendWarning('Please complete all of the data to be . . .');\n        return;\n    }\n\n    WO.insert(\n        {\n            namaWO: namaWO,\n            tipeWO: tipeWO,\n            subTipeWO: subTipeWO,\n            detailTipeWO: detailTipeWO,\n            keteranganWO: keteranganWO,\n            aktifYN: 1,\n            status: \"INPUT\",\n\n            signByID: \"-\",\n            signBy: \"-\",\n            signAt: \"-\",\n            signTo: \"-\",\n\n            closeByID: \"-\",\n            closeBy: \"-\",\n            closeAt: \"-\",\n\n            createByID: UserID(),\n            createBy: UserName(),\n            createAt: new Date()\n        },\n        function (err, id) {\n            if (err) {\n                FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n            } else {\n                Session.set('isCreating', false);\n                FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n            }\n        }\n    );\n};\n\n\nupdatePIC = function (tpl) {\n\n    var id = tpl.$('select[name=\"signTo\"]').val();\n    var nama = SelectedTerpilih(\"signTo\");\n\n    if (!adaDATA(nama)) {\n        FlashMessages.sendWarning('Please complete all of the data to be . . .');\n        return;\n    } else {\n        var nama = MEMBER.findOne({_id: id}).profile.name;\n    }\n\n    WO.update({_id: Session.get('idSignTo')},\n        {\n            $set: {\n                signByID: UserID(),\n                signBy: UserName(),\n                signAt: new Date(),\n                signTo: nama,\n                status: \"SIGN PIC\",\n                signToID: id,\n            }\n        },\n        function (err, id) {\n            if (err) {\n                FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n            } else {\n                Session.set('idEditing', '');\n                FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n            }\n        }\n    );\n\n\n    addTodo(\n        \"SIGN PIC WO\",\n        \"Hello \" + nama + \", Anda telah di minta menjadi PIC untuk Pekerjaan baru. Mohon lihat WO Menu\",\n\n        sURL + \"wo\",\n        Session.get('idSignTo'),\n\n        nama,\n        id);\n\n\n    Session.set('idSignTo', null);\n    Session.set('isSignTo', false);\n\n};\n\n\nupdateWO = function (tpl) {\n\n    var keteranganWO = tpl.$('input[name=\"keteranganEditWO\"]').val();\n\n    if (!adaDATA(keteranganWO)) {\n        FlashMessages.sendWarning('Please complete all of the data to be . . .');\n        return;\n    }\n\n    WO.update({_id: Session.get('idEditing')},\n        {\n            $set: {\n                keteranganWO: keteranganWO\n            }\n        },\n        function (err, id) {\n            if (err) {\n                FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n            } else {\n                Session.set('idEditing', '');\n                FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n            }\n        }\n    );\n};\n\ndeleteWO = function () {\n\n    if (!adaDATA(Session.get('idDeleting'))) {\n        FlashMessages.sendWarning('Please select data that you want to remove . . .');\n        return;\n    }\n\n    WO.update({_id: Session.get('idDeleting')},\n        {\n            $set: {\n                aktifYN: 0,\n                deleteByID: UserID(),\n                deleteBy: UserName(),\n                deleteAt: new Date()\n            }\n        },\n        function (err, id) {\n            if (err) {\n                FlashMessages.sendWarning('Sorry, Data could not be saved - Please repeat again.');\n            } else {\n                Session.set('idEditing', '');\n                FlashMessages.sendSuccess('Thanks, your data is successfully saved');\n            }\n        }\n    );\n};\n"]},"sourceType":"script","hash":"3e7e8273dba8bb936be76c275b45dff975b06c2a"}
