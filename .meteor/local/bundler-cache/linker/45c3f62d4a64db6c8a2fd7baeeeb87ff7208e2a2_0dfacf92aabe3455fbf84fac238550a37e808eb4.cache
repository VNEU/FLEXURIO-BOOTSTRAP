[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar _ = Package.underscore._;\nvar check = Package.check.check;\nvar Match = Package.check.Match;\nvar Mousetrap = Package['mousetrap:mousetrap'].Mousetrap;\n\n/* Package-scope variables */\nvar Hotkeys;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/flowkey_hotkeys/hotkeys.js                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n// Object to save the replaced hotkeys \nvar comboMap = {};\n\nHotkeys = function(options) {\n    this.hotkeys = [];\n\n    if (!options || options.autoLoad === undefined) {\n        this.autoLoad = true;\n    } else {\n        this.autoLoad = options.autoLoad;\n    }\n}\n\n_.extend(Hotkeys.prototype, {\n    add: function(obj) {\n        var combo = obj.combo;\n        var description = obj.description;\n        var evenType = obj.evenType; \n        var callback = obj.callback;\n\n        // add all hotkeys to local collection\n        this.hotkeys.push(obj);\n\n        // Small Error check\n        if(!_.isArray(combo)){\n            check(combo, String);\n        }\n\n        if(!_.isString(evenType)){\n            evenType = '';\n        }\n\n        if (!_.isFunction(callback)) {\n            throw new Meteor.Error(001, 'Error 001: Callback is not a Function');\n        }\n\n        var comboMapEntry = comboMap[combo];\n        if (!_.isArray(comboMapEntry)) {\n             comboMap[combo] = []\n        }\n        if (this.autoLoad === true) {\n            comboMap[combo].push(callback);\n            Mousetrap.bind(combo, callback, evenType);\n        }\n    },\n    load: function() {\n        var allHotkeys = this.hotkeys;\n        _.each(allHotkeys, function(hotkey) {\n            comboMap[hotkey.combo].push(hotkey.callback);\n            Mousetrap.bind(hotkey.combo, hotkey.callback, hotkey.evenType);\n        })\n\n    },\n    unload: function() {\n        var allHotkeys = this.hotkeys;\n        _.each(allHotkeys, function(hotkey) {\n            var comboMapEntry = comboMap[hotkey.combo];\n\n            _.each(comboMapEntry, function(func, index){\n            \tif(func == hotkey.callback){\n\t\t\t\t\tcomboMap[hotkey.combo].splice(index,1);\n            \t}\n            });\n\n            // bind it back to the original one\n            if(comboMapEntry.length > 0){\n                Mousetrap.bind(hotkey.combo, comboMap[hotkey.combo][comboMapEntry.length -1 ], hotkey.evenType);   \n            }else{\n                Mousetrap.unbind(hotkey.combo);\n            }\n\n        })\n\n    }\n})\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"flowkey:hotkeys\", {\n  Hotkeys: Hotkeys\n});\n\n})();\n","servePath":"/packages/flowkey_hotkeys.js"}]